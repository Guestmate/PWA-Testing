{"version":3,"sources":["../../src/pages/service-upgrade/service-upgrade.module.ts","../../src/pages/service-upgrade/service-upgrade.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ServiceUpgradePage } from './service-upgrade';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ServiceUpgradePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ServiceUpgradePage),\n        TranslateModule.forChild()\n  ],\n})\nexport class ServiceUpgradePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-upgrade/service-upgrade.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, Loading, Platform } from 'ionic-angular';\nimport { AncillaryServiceProvider } from '../../providers/ancillary-service/ancillary-service';\nimport { ToolsProvider } from '../../providers/tools/tools';\nimport { HotelServiceProvider } from '../../providers/hotel-service/hotel-service';\nimport { CheckinServiceProvider } from '../../providers/checkin-service/checkin-service';\nimport { ReservationServiceProvider } from '../../providers/reservation-service/reservation-service';\nimport { UpgradeServiceData } from '../../model/upgrade-service-model';\nimport { NotificationProvider } from '../../providers/notification/notification';\n\n/**\n * Generated class for the ServiceUpgradePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-service-upgrade',\n  templateUrl: 'service-upgrade.html',\n})\nexport class ServiceUpgradePage {\n  loading: Loading;\n  serviceRateText: string = '';\n  servicesList: any = [];\n  currencySymbol: any = this.hotelProvider.objHotel.currency.signo;\n  Qty: any = [];\n  selectedServices: any = [];\n  filteredServices: any = [];\n  tempList: any = [];\n  listArray: any;\n  loadedData: any;\n  localData: any = [];\n  devicePlatForm: string = \"android\";\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private serviceProvider: AncillaryServiceProvider, public toolsProvider: ToolsProvider,\n    private checkinProvider: CheckinServiceProvider, private hotelProvider: HotelServiceProvider,\n    private reservationProvider: ReservationServiceProvider, private notificationProvider: NotificationProvider, public loadingCtrl: LoadingController, private platForm: Platform) {\n    if (this.platForm.is('ios')) {\n        this.devicePlatForm = \"ios\";\n    }\n  }\n  ionViewDidLoad() {\n    this.showLoading();\n    console.log('ionViewDidLoad ServiceUpgradePage');\n    if (this.serviceProvider.objUpgradeService && this.serviceProvider.objUpgradeService.localData) {\n      this.loadedData = this.serviceProvider.objUpgradeService.localData;\n      for (let item of this.loadedData) {\n        if (item.quantity) {\n          this.Qty[item.serviceId] = item.quantity;\n        }\n      }\n    }\n    //service call\n    this.serviceProvider.sendUpgradeServiceInfo().subscribe(data => {\n      this.loading.dismiss();\n      if (data.success == true && (data.response.length > 0)) {//inserting values to upgrade service model\n        this.serviceProvider.objUpgradeService = new UpgradeServiceData();\n        for (let item of data.response) {\n\n          let itemArray: any = [];\n          let imagePath = this.toolsProvider.getImagePath(item.foto.id); // image path using image id\n          itemArray.imgPath = imagePath;\n          itemArray.price = item.precio;\n          itemArray.id = item.id;\n          itemArray.order = item.orden;\n          itemArray.name = item.nombre;\n          itemArray.description = item.descripcion;\n          this.servicesList.push(itemArray);\n\n        }\n        this.serviceProvider.objUpgradeService.ancillaryList = this.servicesList;\n      }\n    });\n    //translate\n    let defaultRateTranslate = this.toolsProvider.fnLanguageTranslate(\"common.porDia\");\n    let defaultRateText = '';\n    defaultRateTranslate.subscribe((value: string) => {\n      defaultRateText = value;\n    });\n\n    //this.servicesList = this.serviceProvider.objUpgradeService.ancillaryList; //to get list of all ancillary services\n    this.serviceRateText = this.currencySymbol + defaultRateText;\n  }\n\n  public showLoading() {\n    this.loading = this.loadingCtrl.create({\n      spinner: 'crescent'\n    });\n\n    this.loading.present();\n  }\n  // store entered data into model before leaving page\n  public ionViewWillLeave() {\n    this.listArray = this.servicesList;\n    Object.keys(this.Qty).forEach(itemId => {\n      if (itemId != undefined && this.Qty[itemId] != undefined && this.Qty[itemId] > 0) {\n        this.filteredServices = this.listArray.filter(x => x.id == itemId);\n\n        //if service upgrade selected data updated into ancillary summary list\n        let serviceArray: any = [];\n        serviceArray.type = 'service';\n        serviceArray.quantity = this.Qty[itemId];\n        serviceArray.serviceId = itemId;\n        this.localData.push(serviceArray);\n      }\n\n    });\n    this.serviceProvider.objUpgradeService.localData = this.localData;\n  }\n\n  //to add quantity of an extra service\n  fnAddExtraServices(itemId) {\n    this.Qty[itemId] = (this.Qty[itemId]) ? this.Qty[itemId] + 1 : 1;\n  }\n\n  //to subtract quantity of an extra service\n  fnRemoveExtraServices(itemId) {\n    this.Qty[itemId] = (this.Qty[itemId]) ? this.Qty[itemId] - 1 : 0;\n  }\n\n  //click to go to next page\n  fnContinue() {\n\n    this.filteredServices = [];\n    this.selectedServices = [];\n    this.listArray = this.servicesList;\n    this.checkinProvider.objCheckin.ancillarySummaryList = this.checkinProvider.objCheckin.ancillarySummaryList.filter(e => e.type == \"room\");\n    Object.keys(this.Qty).forEach(itemId => {\n      if (itemId != undefined && this.Qty[itemId] != undefined && this.Qty[itemId] > 0) {\n        this.filteredServices = this.listArray.filter(x => x.id == itemId);\n\n        //if service upgrade selected data updated into ancillary summary list\n        let serviceArray: any = [];\n        serviceArray.type = 'service';\n        serviceArray.quantity = this.Qty[itemId];\n        serviceArray.serviceId = itemId;\n        serviceArray.currency = this.currencySymbol;\n        serviceArray.pricePerDay = this.filteredServices[0].price;\n        serviceArray.serviceName = this.filteredServices[0].name;\n        serviceArray.nights = this.reservationProvider.objReservation.nights;\n        this.selectedServices.push(serviceArray);\n\n        this.checkinProvider.objCheckin.ancillarySummaryList.push(serviceArray);\n      }\n\n    });\n\n    this.navCtrl.push(\"CheckinSummaryPage\", {}, { animate: true, animation: 'transition', duration: 500, direction: 'forward' });\n  }\n\n  //function to go to previous page\n  public fnBack() {\n    this.navCtrl.pop({ animate: true, animation: 'transition', duration: 500, direction: 'back' });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-upgrade/service-upgrade.ts"],"sourceRoot":""}