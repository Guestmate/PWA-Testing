{"version":3,"sources":["../../src/pages/confirm-order/confirm-order.module.ts","../../src/pages/confirm-order/confirm-order.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConfirmOrderPage } from './confirm-order';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ConfirmOrderPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ConfirmOrderPage),\n    TranslateModule.forChild()\n  ],\n})\nexport class ConfirmOrderPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirm-order/confirm-order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { RoomsServiceProvider } from '../../providers/rooms-service/rooms-service';\nimport { HotelServiceProvider } from '../../providers/hotel-service/hotel-service';\nimport { ToolsProvider } from '../../providers/tools/tools';\nimport { ReservationServiceProvider } from '../../providers/reservation-service/reservation-service';\nimport { NotificationProvider } from '../../providers/notification/notification';\n\n/**\n * Generated class for the ConfirmOrderPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-confirm-order',\n  templateUrl: 'confirm-order.html',\n})\nexport class ConfirmOrderPage {\n  nonEmptyOrder: boolean = true;\n  ordersList: any = [];\n  total: any = 0;\n  currencySymbol: any = this.hotelProvider.objHotel.currency.signo; // currency symbol\n  showBackButton: boolean = true;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private roomsProvider: RoomsServiceProvider,\n    public hotelProvider: HotelServiceProvider, public toolsProvider: ToolsProvider,\n    public alertCtrl: AlertController, public reservationProvider: ReservationServiceProvider, private notificationProvider: NotificationProvider) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ConfirmOrderPage');\n  }\n\n  ionViewWillEnter() {\n    this.showBackButton = true;\n    this.ordersList = this.roomsProvider.objRoomService.currentOrderList;\n    this.nonEmptyOrder = (this.ordersList) && (this.ordersList.length > 0) ? true : false;\n    this.fnCalculateCartTotal();\n  }\n\n  ionViewWillLeave() {\n    this.showBackButton = false;\n  }\n  //to calculate total price of all cart items\n  fnCalculateCartTotal() {\n    this.total = 0;\n    for (let i = 0; i < this.ordersList.length; i++) {\n      for (let j = 0; j < this.ordersList[i].availableItems.length; j++) {\n        this.total = this.total + (this.ordersList[i].availableItems[j].quantity * this.ordersList[i].availableItems[j].price);\n      }\n    }\n    this.total = this.total.toFixed(this.hotelProvider.objHotel.currency.decimales);\n    this.nonEmptyOrder = this.roomsProvider.objRoomService.cartTotal > 0 ? true : false;  //to set if cart empty after delete operation or not\n  }\n\n  //function to delete items\n  fnDeleteOrder(itemId, availableItemId) {\n    if (itemId > 0 && availableItemId > 0) {\n      this.roomsProvider.objRoomService.cartTotal = this.roomsProvider.objRoomService.cartTotal - this.ordersList.filter(x => x.id == itemId)[0].availableItems.filter(y => y.id == availableItemId)[0].quantity;\n      this.ordersList.filter(x => x.id == itemId)[0].availableItems.filter(y => y.id == availableItemId)[0].quantity = 0;\n      this.ordersList.filter(x => x.id == itemId)[0].isSelected = false;\n      this.roomsProvider.objRoomService.serviceItemsList.filter(x => x.id == availableItemId)[0].quantity = 0;\n    }\n\n    else {                                                //in case of deleting all  items\n      for (var i = 0; i < this.ordersList.length; i++) {\n        for (var j = 0; j < this.ordersList[i].availableItems.length; j++) {\n          this.ordersList[i].availableItems[j].quantity = 0;\n          this.ordersList[i].isSelected = false;\n        }\n      }\n      for (var i = 0; i < this.roomsProvider.objRoomService.serviceItemsList.length; i++) {\n        this.roomsProvider.objRoomService.serviceItemsList[i].quantity = 0;\n      }\n      this.roomsProvider.objRoomService.cartTotal = 0;\n\n    }\n    this.fnCalculateCartTotal();\n  }\n\n  //function to go to next page\n  fnContinue() {\n    this.roomsProvider.objRoomService.currentOrderList = this.ordersList;\n    // check reservation is in a valid date range\n    let createdDate = this.reservationProvider.objReservation.createdDate,\n      noOfNightsStay = this.reservationProvider.objReservation.nights,\n      noStayGuest = this.reservationProvider.objReservation.noStayGuest;\n    let dateRange = this.toolsProvider.getValidReservationDateRange(createdDate, noOfNightsStay, noStayGuest);\n    if (this.roomsProvider.objRoomService.cartTotal > 0) {\n      if (dateRange == null) {\n        // error message translate\n        let msg = this.toolsProvider.fnLanguageTranslate([\"common.error\", \"view.reservation.error.dateRange\", \"buttons.ok\"]); //  message translation\n\n        msg.subscribe((value: string) => {\n          let alertnew = this.alertCtrl.create({\n            title: value['common.error'],\n            message: value[\"view.reservation.error.dateRange\"],\n            cssClass: 'cls_alrt',\n            buttons: [\n              {\n                text: value['buttons.ok'],\n                role: 'cancel'\n              }]\n          });\n          alertnew.present();\n          setTimeout(() => { alertnew.dismiss(); }, 5000);\n        });\n      }\n      else {\n        this.navCtrl.push(\"RoomServiceBookingPage\", {}, { animate: true, animation: 'transition', duration: 500, direction: 'forward' });\n      }\n    }\n  }\n\n  //function to go to previous page\n  public fnBack() {\n    this.roomsProvider.objRoomService.currentOrderList = this.ordersList;\n    this.navCtrl.pop({ animate: true, animation: 'transition', duration: 500, direction: 'back' });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirm-order/confirm-order.ts"],"sourceRoot":""}